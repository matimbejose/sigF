<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <ui:composition template="/WEB-INF/template.xhtml">

        <ui:param name="title" value="Nota fiscal de produto"/>

        <ui:define name="title">#{title}</ui:define>

        <ui:define name="viewname">
            <li>Nota fiscal</li>
            <li>/</li>
            <li><p:link outcome="/restrito/notaFiscalProduto/listaNotaFiscalProduto.xhtml"> #{title}</p:link></li>
        </ui:define>

        <ui:define name="remotes">
            <h:commandButton id="remoteSave" action="#{notaFiscalProdutoControle.doFinishAdd()}"/>
            <h:commandButton id="remoteCancel" action="listaNotaFiscalProduto.xhtml" immediate="true"/>
        </ui:define>

        <ui:define name="content">
            <p:importEnum type="br.com.villefortconsulting.sgfinancas.util.nf.EnumTipoGeracaoNF"/>
            <div>
                <p:row rendered="#{notaFiscalProdutoControle.nfSelecionado.tipoGeracao eq EnumTipoGeracaoNF.AVULSO.tipo}">
                    <p:importEnum type="br.com.villefortconsulting.sgfinancas.util.nf.EnumModeloEmissaoNF"/>
                    <div style="width: 180px;float: right;margin: -93px 8px 0 0;">
                        <p:outputLabel for="@next" value="Modelo da nota"/>
                        <p:selectOneMenu value="#{notaFiscalProdutoControle.nfSelecionado.modeloNota}">
                            <f:selectItem noSelectionOption="true" itemLabel="-- Selecione --"/>
                            <f:selectItems value="#{EnumModeloEmissaoNF.ALL_VALUES}" var="enum" itemLabel="#{enum.descricao}" itemValue="#{enum.modelo}"/>
                            <p:ajax process="@this" update="@form"/>
                        </p:selectOneMenu>
                    </div>
                </p:row>
            </div>
            <p:row rendered="#{notaFiscalProdutoControle.nfSelecionado.modeloNota eq null}">
                <div class="form-body text-center">
                    <div class="card card-w-title">
                        <h5>Selecione um modelo de emissão</h5>
                    </div>
                </div>
            </p:row>
            <p:row rendered="#{notaFiscalProdutoControle.nfSelecionado.modeloNota ne null}">
                <div class="form-body">
                    <div class="row mb-3">
                        <div class="col-md-6 col-sm-12">
                            <div class="card card-w-title h-100">
                                <h5>Detalhes</h5>
                                <div class="row">
                                    <div class="col" style="max-width: 124px;">
                                        <div class="form-group form-md-line-input">
                                            <p:outputLabel for="@next" value="Emissão"/>
                                            <p:calendar navigator="true" value="#{notaFiscalProdutoControle.nfSelecionado.dataEmissao}" pattern="dd/MM/yyyy" mask="true"
                                                        required="true" requiredMessage="Informe a data de emissão"/>
                                        </div>
                                    </div>
                                    <div class="col" style="max-width: 100px;">
                                        <div class="form-group form-md-line-input">
                                            <p:outputLabel for="@next" value="UF"/>
                                            <p:selectOneMenu id="ufPrestacao" value="#{notaFiscalProdutoControle.nfSelecionado.idUfPrestacao}"
                                                             converter="#{genericConverter}">
                                                <f:selectItem itemLabel="--" noSelectionOption="true"/>
                                                <f:selectItems value="#{notaFiscalProdutoControle.UFs}" var="uf" itemLabel="#{uf.descricao}" itemValue="#{uf}"/>
                                                <p:ajax event="change" process="@this" update="ufPrestacao, municipio"/>
                                            </p:selectOneMenu>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="form-group form-md-line-input">
                                            <p:outputLabel for="@next" value="Município"/>
                                            <p:selectOneMenu id="municipio" value="#{notaFiscalProdutoControle.nfSelecionado.idMunicipioPrestacao}"
                                                             panelStyle="width:180px" effect="fade" var="t" style="width:160px" filter="true"
                                                             filterMatchMode="startsWith" converter="#{genericConverter}">
                                                <p:column>
                                                    <h:outputText value="#{t.descricao}"/>
                                                </p:column>

                                                <f:selectItem itemLabel="-- Selecione -- " noSelectionOption="true"/>
                                                <f:selectItems value="#{notaFiscalProdutoControle.municipios}" var="municipio" itemLabel="#{municipio.descricao}" itemValue="#{municipio}"/>
                                            </p:selectOneMenu>
                                        </div>
                                    </div>
                                </div>
                                <div class="row align-items-end">
                                    <div class="col">
                                        <div class="form-group form-md-line-input">
                                            <p:outputLabel for="@next" value="Presença do cliente no estabelecimento"/>
                                            <p:selectOneMenu value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.ide.indPres}"
                                                             required="true" requiredMessage="Informe presença do cliente no estabelecimento">
                                                <f:selectItem itemLabel="-- Selecione -- " noSelectionOption="true"/>
                                                <f:selectItem itemValue="0" itemLabel="Não se aplica"/>
                                                <f:selectItem itemValue="1" itemLabel="Operação presencial"/>
                                                <f:selectItem itemValue="2" itemLabel="Operação pela internet"/>
                                                <f:selectItem itemValue="3" itemLabel="Operação por teleatendimento"/>
                                                <f:selectItem itemValue="5" itemLabel="Operação presencial, fora do estabelecimento"/>
                                                <f:selectItem itemValue="9" itemLabel="Operação nao presencial, outros"/>
                                            </p:selectOneMenu>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <div class="form-group form-md-line-input">
                                            <p:outputLabel for="@next" value="Local de destino de operação"/>
                                            <p:selectOneMenu value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.ide.idDest}"
                                                             required="true" requiredMessage="Informe local de destino de operação">
                                                <f:selectItem itemLabel="-- Selecione -- " noSelectionOption="true"/>
                                                <f:selectItem itemValue="1" itemLabel="Operação interna"/>
                                                <f:selectItem itemValue="2" itemLabel="Operação interestadual"/>
                                                <f:selectItem itemValue="3" itemLabel="Operação com exterior"/>
                                            </p:selectOneMenu>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="card card-w-title h-100">
                                <h5>Informações</h5>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group form-md-line-input">
                                            <p:outputLabel for="@next" value="Número da nota fiscal"/>
                                            <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.ide.NNF}" maxValue="999999999"
                                                           decimalPlaces="0" thousandSeparator="" id ="numeroNF"/>
                                            <p:tooltip for="numeroNF" value="Deixe o campo em branco para que o SGFinanças preencha automaticamente." position="top"/>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group form-md-line-input">
                                            <p:outputLabel for="@next" value="Série"/>
                                            <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.ide.serie}" maxValue="999"
                                                           decimalPlaces="0"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <p:row rendered="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.ide.tpEmis eq '4'}">
                                        <div class="col-md-12">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Justificativa de devolução"/>
                                                <p:inputTextarea value="#{notaFiscalProdutoControle.nfSelecionado.justificativaDevolucao}"
                                                                 required="true" requiredMessage="Informe a justificativa para a devolução" rows="2"/>
                                            </div>
                                        </div>
                                    </p:row>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group form-md-line-input">
                                            <p:outputLabel for="@next" value="Informações complementares"/>
                                            <p:inputText value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.infAdic.infCpl}"/>

                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group form-md-line-input">
                                            <p:outputLabel for="@next" value="Informações para o Fisco"/>
                                            <p:inputText value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.infAdic.infAdFisco}"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-12 col-sm-12">
                            <div class="card card-w-title">
                                <h5 style="margin-bottom: 5px;">
                                    Produto
                                    <div style="width: 140px;float: right;display: inline-block;font-size: 12px;margin-top: -5px;">
                                        <p:selectOneMenu value="#{notaFiscalProdutoControle.cfopPadrao}" panelStyle="width:500px" effect="fade" var="t"
                                                         filter="true" filterMatchMode="startsWith" converter="#{genericConverter}" style="border: none;">
                                            <p:column>
                                                <h:outputText value="#{t.codigo}"/>
                                            </p:column>
                                            <p:column>
                                                <h:outputText value="#{t.descricao}"/>
                                            </p:column>

                                            <f:selectItem itemLabel="CFOP padrão" noSelectionOption="true"/>
                                            <f:selectItems value="#{cfopControle.getCfops(notaFiscalProdutoControle.nfSelecionado)}"
                                                           var="cfop" itemLabel="#{cfop.codigo}" itemValue="#{cfop}"/>
                                            <p:ajax event="change" listener="#{notaFiscalProdutoControle.updateCfop()}" update="tblProdutos"/>
                                        </p:selectOneMenu>
                                    </div>
                                    <div class="clearfix"></div>
                                </h5>
                                <div class="row">
                                    <div class="col-md-12">
                                        <p:dataTable value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.det}" var="item"
                                                     emptyMessage="Nenhum produto informado." editable="true" editMode="cell" id="tblProdutos" rowIndexVar="i"
                                                     styleClass="card p-0 ui-datatable-scrollable ui-datatable-striped ui-datatable-sm ui-datatable-gridlines ui-datatable-reflow">

                                            <f:facet name="header">
                                                <div class="pull-right">
                                                    <p:commandButton id="dynaButton" value="Colunas" type="button"/>
                                                    <p:menu overlay="true" trigger="dynaButton" my="left bottom" at="left top">
                                                        <p:menuitem value="Mínimo        " action="#{notaFiscalProdutoControle.setNivelExibicao(0)}" immediate="true"
                                                                    update="tblProdutos" disabled="#{notaFiscalProdutoControle.nivelExibicao eq 0}"/>
                                                        <p:menuitem value="Básico        " action="#{notaFiscalProdutoControle.setNivelExibicao(1)}" immediate="true"
                                                                    update="tblProdutos" disabled="#{notaFiscalProdutoControle.nivelExibicao eq 1}"/>
                                                        <p:menuitem value="Intermediário " action="#{notaFiscalProdutoControle.setNivelExibicao(2)}" immediate="true"
                                                                    update="tblProdutos" disabled="#{notaFiscalProdutoControle.nivelExibicao eq 2}"/>
                                                        <p:menuitem value="Completo      " action="#{notaFiscalProdutoControle.setNivelExibicao(3)}" immediate="true"
                                                                    update="tblProdutos" disabled="#{notaFiscalProdutoControle.nivelExibicao eq 3}"/>
                                                    </p:menu>
                                                    <p:commandButton rendered="#{notaFiscalProdutoControle.nfSelecionado.tipoGeracao eq EnumTipoGeracaoNF.AVULSO.tipo}"
                                                                     action="#{notaFiscalProdutoControle.addProduto()}" value="Adicionar" update="tblProdutos" process="@this"/>
                                                </div>
                                                <div class="clearfix"></div>
                                            </f:facet>

                                            <p:column style="width:16px" rendered="#{!notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}">
                                                <p:rowToggler/>
                                            </p:column>

                                            <p:rowExpansion rendered="#{!notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}">
                                                <c:set value="#{(empresaControle.empresaPertenceAoSimplesNacional() eq true and item.idCsosn.value ne null and item.idCsosn.value.id ne null) or
                                                                (empresaControle.empresaPertenceAoSimplesNacional() ne true and item.idCst.value ne null and item.idCst.value.id ne null)}"
                                                       var="cstCsosnInformado"/>
                                                <p:row rendered="#{cstCsosnInformado}">
                                                    <p:tabView id="imposto" styleClass="my-2">
                                                        <p:tab title="PIS ST">
                                                            <h5>Programa de Integração Social (Substituição tributária)</h5>
                                                            <p:row rendered="#{item.imposto.content.get('PISST') eq null}">
                                                                <div class="text-center">
                                                                    <p:commandButton actionListener="#{notaFiscalProdutoControle.addimposto(item, 'PISST')}"
                                                                                     value="Adicionar" process="@this" update="form:tblProdutos:#{i}:imposto, form:totais"/>
                                                                </div>
                                                            </p:row>
                                                            <p:row rendered="#{item.imposto.content.get('PISST') ne null}">
                                                                <c:set var="PISST" value="#{item.imposto.content.get('PISST')}"/>
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <div class="form-group form-md-line-input">
                                                                            <p:outputLabel for="@next" value="Valor do PIS ST"/>
                                                                            <p:inputNumber value="#{PISST.VPIS}" symbol="R$ " symbolPosition="p"
                                                                                           thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col">
                                                                        <div class="card card-w-title p-0">
                                                                            <div class="card-header">Alíquota ad valorem</div>
                                                                            <div class="card-body">
                                                                                <div class="row">
                                                                                    <div class="col">
                                                                                        <div>
                                                                                            <p:outputLabel for="@next" value="BC PIS ST"/>
                                                                                            <p:inputNumber value="#{PISST.VBC}" symbol="R$ " symbolPosition="p"
                                                                                                           thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="col">
                                                                                        <div>
                                                                                            <p:outputLabel for="@next" value="Alíquota PIS ST"/>
                                                                                            <p:inputNumber value="#{PISST.PPIS}" symbol="%" symbolPosition="s"
                                                                                                           thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col">
                                                                        <div class="card card-w-title p-0">
                                                                            <div class="card-header">Alíquota específica</div>
                                                                            <div class="card-body">
                                                                                <div class="row">
                                                                                    <div class="col">
                                                                                        <div>
                                                                                            <p:outputLabel for="@next" value="Quantidade vendida"/>
                                                                                            <p:inputNumber value="#{PISST.QBCProd}"
                                                                                                           thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="col">
                                                                                        <div>
                                                                                            <p:outputLabel for="@next" value="Alíquota PIS"/>
                                                                                            <p:inputNumber value="#{PISST.VAliqProd}" symbol="R$ " symbolPosition="p"
                                                                                                           thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <small>Preencher ou os campos do <i>Alíquota ad valorem</i> ou os do <i>Alíquota específica</i>.</small>
                                                            </p:row>
                                                        </p:tab>
                                                        <p:tab title="PIS">
                                                            <h5>Programa de Integração Social</h5>
                                                            <p:row rendered="#{item.imposto.content.get('PIS') eq null}">
                                                                <div class="text-center">
                                                                    <p:commandButton actionListener="#{notaFiscalProdutoControle.addimposto(item, 'PIS')}"
                                                                                     value="Adicionar" process="@this" update="form:tblProdutos:#{i}:imposto, form:totais"/>
                                                                </div>
                                                            </p:row>
                                                            <p:row rendered="#{item.imposto.content.get('PIS') ne null}">
                                                                <c:set var="PIS" value="#{item.imposto.content.get('PIS')}"/>

                                                                <div class="row">
                                                                    <div class="col">
                                                                        <div class="card p-0 mb-2">
                                                                            <div class="card-header">
                                                                                PIS selecionado:
                                                                                <p:selectOneMenu value="#{PIS.tipoPIS}" styleClass="inlineSelector">
                                                                                    <f:selectItem itemLabel="Selecione" noSelectionOption="true"/>
                                                                                    <f:selectItem itemValue="PISAliq" itemLabel="PISAliq"/>
                                                                                    <f:selectItem itemValue="PISQtde" itemLabel="PISQtde"/>
                                                                                    <f:selectItem itemValue="PISNT" itemLabel="PISNT"/>
                                                                                    <f:selectItem itemValue="PISOutr" itemLabel="PISOutr"/>
                                                                                    <p:ajax process="@this" update="form:tblProdutos:#{i}:imposto:PISs" listener="#{notaFiscalProdutoControle.changePIS(PIS)}"/>
                                                                                </p:selectOneMenu>
                                                                            </div>
                                                                            <div class="card-body">
                                                                                <p:outputPanel id="PISs">
                                                                                    <p:row rendered="#{PIS.tipoPIS eq null}">
                                                                                        Selecione o tipo do PIS
                                                                                    </p:row>
                                                                                    <p:row rendered="#{PIS.tipoPIS eq 'PISAliq'}">
                                                                                        <div class="row">
                                                                                            <div class="col-2">
                                                                                                <p:outputLabel for="@next" value="CST"/>
                                                                                                <p:selectOneMenu value="#{PIS.PISAliq.CST}" var="t" filter="true"
                                                                                                                 filterMatchMode="startsWith" converter="#{genericConverter}">
                                                                                                    <p:column>
                                                                                                        <h:outputText value="#{t.codigo}"/>
                                                                                                    </p:column>
                                                                                                    <p:column>
                                                                                                        <h:outputText value="#{t.descricao}"/>
                                                                                                    </p:column>

                                                                                                    <f:selectItem itemLabel="--" noSelectionOption="true"/>
                                                                                                    <f:selectItems value="#{cstControle.csts}"  var="cst" itemLabel="#{cst.codigo}" itemValue="#{cst}"/>
                                                                                                </p:selectOneMenu>
                                                                                            </div>
                                                                                            <div class="col">
                                                                                                <div class="form-group form-md-line-input">
                                                                                                    <p:outputLabel for="@next" value="BC"/>
                                                                                                    <p:inputNumber value="#{PIS.PISAliq.VBC}"
                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col">
                                                                                                <div class="form-group form-md-line-input">
                                                                                                    <p:outputLabel for="@next" value="Alíquota do PIS"/>
                                                                                                    <p:inputNumber value="#{PIS.PISAliq.PPIS}" symbol="%" symbolPosition="s"
                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col">
                                                                                                <div class="form-group form-md-line-input">
                                                                                                    <p:outputLabel for="@next" value="Valor do PIS"/>
                                                                                                    <p:inputNumber value="#{PIS.PISAliq.VPIS}" symbol="R$ " symbolPosition="p"
                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row rendered="#{PIS.tipoPIS eq 'PISQtde'}">
                                                                                        <div class="row">
                                                                                            <div class="col-2">
                                                                                                <p:outputLabel for="@next" value="CST"/>
                                                                                                <p:selectOneMenu value="#{PIS.PISQtde.CST}" var="t" filter="true"
                                                                                                                 filterMatchMode="startsWith" converter="#{genericConverter}">
                                                                                                    <p:column>
                                                                                                        <h:outputText value="#{t.codigo}"/>
                                                                                                    </p:column>
                                                                                                    <p:column>
                                                                                                        <h:outputText value="#{t.descricao}"/>
                                                                                                    </p:column>

                                                                                                    <f:selectItem itemLabel="--" noSelectionOption="true"/>
                                                                                                    <f:selectItems value="#{cstControle.csts}"  var="cst" itemLabel="#{cst.codigo}" itemValue="#{cst}"/>
                                                                                                </p:selectOneMenu>
                                                                                            </div>
                                                                                            <div class="col">
                                                                                                <div class="form-group form-md-line-input">
                                                                                                    <p:outputLabel for="@next" value="Qte. vendida"/>
                                                                                                    <p:inputNumber value="#{PIS.PISQtde.QBCProd}"
                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col">
                                                                                                <div class="form-group form-md-line-input">
                                                                                                    <p:outputLabel for="@next" value="Alíquota do PIS"/>
                                                                                                    <p:inputNumber value="#{PIS.PISQtde.VAliqProd}" symbol="R$ " symbolPosition="p"
                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col">
                                                                                                <div class="form-group form-md-line-input">
                                                                                                    <p:outputLabel for="@next" value="Valor do PIS"/>
                                                                                                    <p:inputNumber value="#{PIS.PISQtde.VPIS}" symbol="R$ " symbolPosition="p"
                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row rendered="#{PIS.tipoPIS eq 'PISNT'}">
                                                                                        <div class="row">
                                                                                            <div class="col-2">
                                                                                                <p:outputLabel for="@next" value="CST"/>
                                                                                                <p:selectOneMenu value="#{PIS.PISNT.CST}" var="t" filter="true"
                                                                                                                 filterMatchMode="startsWith" converter="#{genericConverter}">
                                                                                                    <p:column>
                                                                                                        <h:outputText value="#{t.codigo}" />
                                                                                                    </p:column>
                                                                                                    <p:column>
                                                                                                        <h:outputText value="#{t.descricao}" />
                                                                                                    </p:column>

                                                                                                    <f:selectItem itemLabel="--" noSelectionOption="true"/>
                                                                                                    <f:selectItems value="#{cstControle.csts}"  var="cst" itemLabel="#{cst.codigo}" itemValue="#{cst}"/>
                                                                                                </p:selectOneMenu>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row rendered="#{PIS.tipoPIS eq 'PISOutr'}">
                                                                                        <div class="row">
                                                                                            <div class="col-2">
                                                                                                <p:outputLabel for="@next" value="CST"/>
                                                                                                <p:selectOneMenu value="#{PIS.PISOutr.CST}" var="t" filter="true"
                                                                                                                 filterMatchMode="startsWith" converter="#{genericConverter}">
                                                                                                    <p:column>
                                                                                                        <h:outputText value="#{t.codigo}"/>
                                                                                                    </p:column>
                                                                                                    <p:column>
                                                                                                        <h:outputText value="#{t.descricao}"/>
                                                                                                    </p:column>

                                                                                                    <f:selectItem itemLabel="--" noSelectionOption="true"/>
                                                                                                    <f:selectItems value="#{cstControle.csts}"  var="cst" itemLabel="#{cst.codigo}" itemValue="#{cst}"/>
                                                                                                </p:selectOneMenu>
                                                                                                <br/>
                                                                                                <div class="form-group form-md-line-input">
                                                                                                    <p:outputLabel for="@next" value="Valor do PIS"/>
                                                                                                    <p:inputNumber value="#{PIS.PISOutr.VPIS}" symbol="R$ " symbolPosition="p"
                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col">
                                                                                                <div class="card card-w-title p-0">
                                                                                                    <div class="card-header">Alíquota ad valorem</div>
                                                                                                    <div class="card-body">
                                                                                                        <div class="row">
                                                                                                            <div class="col">
                                                                                                                <div>
                                                                                                                    <p:outputLabel for="@next" value="BC"/>
                                                                                                                    <p:inputNumber value="#{PIS.PISOutr.VBC}" symbol="R$ " symbolPosition="p"
                                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="col">
                                                                                                                <div>
                                                                                                                    <p:outputLabel for="@next" value="Alíquota do PIS"/>
                                                                                                                    <p:inputNumber value="#{PIS.PISOutr.PPIS}" symbol="%" symbolPosition="s"
                                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col">
                                                                                                <div class="card card-w-title p-0">
                                                                                                    <div class="card-header">Alíquota específica</div>
                                                                                                    <div class="card-body">
                                                                                                        <div class="row">
                                                                                                            <div class="col">
                                                                                                                <div>
                                                                                                                    <p:outputLabel for="@next" value="Quantidade vendida"/>
                                                                                                                    <p:inputNumber value="#{PIS.PISOutr.QBCProd}"
                                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="col">
                                                                                                                <div>
                                                                                                                    <p:outputLabel for="@next" value="Alíquota do PIS"/>
                                                                                                                    <p:inputNumber value="#{PIS.PISOutr.VAliqProd}" symbol="R$ " symbolPosition="p"
                                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <small>Preencher ou os campos do <i>Alíquota ad valorem</i> ou os do <i>Alíquota específica</i>.</small>
                                                                                    </p:row>
                                                                                </p:outputPanel>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </p:row>
                                                        </p:tab>
                                                        <p:tab title="ISSQN">
                                                            <h5>Imposto sobre serviços de qualquer natureza</h5>
                                                            <p:row rendered="#{item.imposto.content.get('ISSQN') eq null}">
                                                                <div class="text-center">
                                                                    <p:commandButton actionListener="#{notaFiscalProdutoControle.addimposto(item, 'ISSQN')}"
                                                                                     value="Adicionar" process="@this" update="form:tblProdutos:#{i}:imposto, form:totais"/>
                                                                </div>
                                                            </p:row>
                                                            <p:row rendered="#{item.imposto.content.get('ISSQN') ne null}">
                                                                <c:set var="ISSQN" value="#{item.imposto.content.get('ISSQN')}"/>

                                                                <div class="row">
                                                                    <div class="col">
                                                                        <div class="form-group form-md-line-input">
                                                                            <p:outputLabel for="@next" value="BC"/>
                                                                            <p:inputNumber value="#{ISSQN.VBC}" symbol="R$ " symbolPosition="p"
                                                                                           thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col">
                                                                        <div class="form-group form-md-line-input">
                                                                            <p:outputLabel for="@next" value="Alíquota do ISSQN"/>
                                                                            <p:inputNumber value="#{ISSQN.VAliq}" symbol="R$ " symbolPosition="p"
                                                                                           thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col">
                                                                        <div class="form-group form-md-line-input">
                                                                            <p:outputLabel for="@next" value="Valor do ISSQN"/>
                                                                            <p:inputNumber value="#{ISSQN.VISSQN}" symbol="R$ " symbolPosition="p"
                                                                                           thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col">
                                                                        <div class="form-group form-md-line-input">
                                                                            <p:outputLabel for="@next" value="Cód. município"/>
                                                                            <p:inputNumber value="#{ISSQN.CMunFG}" symbol="R$ " symbolPosition="p"
                                                                                           thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col">
                                                                        <div class="form-group form-md-line-input">
                                                                            <p:outputLabel for="@next" value="Cód. ABRASF"/>
                                                                            <p:inputMask value="#{ISSQN.CListServ}" mask="00.00"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="card p-0">
                                                                    <div class="card-header bg-danger text-white">
                                                                        <i class="fa fa-exclamation-triangle"></i> <strong>Atenção</strong>
                                                                        Informar apenas na situação em que uma prestação de serviço seja fato gerador do ISSQN e do ICMS
                                                                        <p:commandLink onclick="PF('issqnHelp').show();" styleClass="text-white">
                                                                            <i class="fa fa-info-circle pull-right mt-1"></i>
                                                                        </p:commandLink>
                                                                    </div>
                                                                    <div class="card-body">
                                                                        <div class="row align-items-end">
                                                                            <div class="col">
                                                                                <div class="form-group form-md-line-input">
                                                                                    <p:outputLabel for="@next" value="Valor de dedução da BC"/>
                                                                                    <p:inputNumber value="#{ISSQN.VDeducao}" symbol="R$ " symbolPosition="p"
                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col">
                                                                                <div class="form-group form-md-line-input">
                                                                                    <p:outputLabel for="@next" value="Outras retenções"/>
                                                                                    <p:inputNumber value="#{ISSQN.VOutro}" symbol="R$ " symbolPosition="p"
                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col">
                                                                                <div class="form-group form-md-line-input">
                                                                                    <p:outputLabel for="@next" value="Desconto incondicionado"/>
                                                                                    <p:inputNumber value="#{ISSQN.VDescIncond}" symbol="R$ " symbolPosition="p"
                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col">
                                                                                <div class="form-group form-md-line-input">
                                                                                    <p:outputLabel for="@next" value="Desconto condicionado"/>
                                                                                    <p:inputNumber value="#{ISSQN.VDescCond}" symbol="R$ " symbolPosition="p"
                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col">
                                                                                <div class="form-group form-md-line-input">
                                                                                    <p:outputLabel for="@next" value="ISS retido"/>
                                                                                    <p:inputNumber value="#{ISSQN.VISSRet}" symbol="R$ " symbolPosition="p"
                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col">
                                                                                <div class="form-group form-md-line-input">
                                                                                    <p:outputLabel for="@next" value="Exigibilidade de ISS"/>
                                                                                    <p:selectOneMenu value="#{ISSQN.indISS}">
                                                                                        <f:selectItem noSelectionOption="true" itemLabel="-- Selecione --"/>
                                                                                        <f:selectItem itemValue="1" itemLabel="Exigivel"/>
                                                                                        <f:selectItem itemValue="2" itemLabel="Não incidente"/>
                                                                                        <f:selectItem itemValue="3" itemLabel="Isenção"/>
                                                                                        <f:selectItem itemValue="4" itemLabel="Exportação"/>
                                                                                        <f:selectItem itemValue="5" itemLabel="Imunidade"/>
                                                                                        <f:selectItem itemValue="6" itemLabel="Exigida suspensão judicial"/>
                                                                                        <f:selectItem itemValue="7" itemLabel="Exigida suspensão administrativa"/>
                                                                                    </p:selectOneMenu>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row align-items-end">
                                                                            <div class="col">
                                                                                <div class="form-group form-md-line-input">
                                                                                    <p:outputLabel for="@next" value="Cód. serviço"/>
                                                                                    <p:inputNumber value="#{ISSQN.CServico}" decimalPlaces="0"/>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col">
                                                                                <div class="form-group form-md-line-input">
                                                                                    <p:outputLabel for="@next" value="Cód. município"/>
                                                                                    <p:selectOneMenu value="#{ISSQN.idCidade.value}" converter="#{genericConverter}">
                                                                                        <f:selectItem itemLabel="-- Selecione -- " noSelectionOption="true"/>
                                                                                        <f:selectItems value="#{notaFiscalProdutoControle.cidades}" var="cidade" itemLabel="#{cidade.descricao}" itemValue="#{cidade}"/>
                                                                                    </p:selectOneMenu>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col">
                                                                                <div class="form-group form-md-line-input">
                                                                                    <p:outputLabel for="@next" value="Cód. país"/>
                                                                                    <p:inputNumber value="#{ISSQN.CPais}" symbol="R$ " symbolPosition="p"
                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col">
                                                                                <div class="form-group form-md-line-input">
                                                                                    <p:outputLabel for="@next" value="Nº processo administrativo/judicial"/>
                                                                                    <p:inputNumber value="#{ISSQN.NProcesso}" symbol="R$ " symbolPosition="p"
                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col">
                                                                                <div class="form-group form-md-line-input">
                                                                                    <p:outputLabel for="@next" value=""/>
                                                                                    <p:selectOneMenu value="#{ISSQN.indIncentivo}">
                                                                                        <f:selectItem noSelectionOption="true" itemLabel="-- Selecione --"/>
                                                                                        <f:selectItem itemValue="1" itemLabel="Sim"/>
                                                                                        <f:selectItem itemValue="2" itemLabel="Não"/>
                                                                                    </p:selectOneMenu>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </p:row>
                                                        </p:tab>
                                                        <p:tab title="II">
                                                            <h5>Imposto de Importação</h5>
                                                            <p:row rendered="#{item.imposto.content.get('II') eq null}">
                                                                <div class="text-center">
                                                                    <p:commandButton actionListener="#{notaFiscalProdutoControle.addimposto(item, 'II')}"
                                                                                     value="Adicionar" process="@this" update="form:tblProdutos:#{i}:imposto, form:totais"/>
                                                                </div>
                                                            </p:row>
                                                            <p:row rendered="#{item.imposto.content.get('II') ne null}">
                                                                <c:set var="II" value="#{item.imposto.content.get('II')}"/>
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <div class="form-group form-md-line-input">
                                                                            <p:outputLabel for="@next" value="BC"/>
                                                                            <p:inputNumber value="#{II.VBC}" symbol="R$ " symbolPosition="p"
                                                                                           thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col">
                                                                        <div class="form-group form-md-line-input">
                                                                            <p:outputLabel for="@next" value="Valor das despesas aduaneiras"/>
                                                                            <p:inputNumber value="#{II.VDespAdu}" symbol="R$ " symbolPosition="p"
                                                                                           thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col">
                                                                        <div class="form-group form-md-line-input">
                                                                            <p:outputLabel for="@next" value="Valor II"/>
                                                                            <p:inputNumber value="#{II.VII}" symbol="R$ " symbolPosition="p"
                                                                                           thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col">
                                                                        <div class="form-group form-md-line-input">
                                                                            <p:outputLabel for="@next" value="Valor IOF"/>
                                                                            <p:inputNumber value="#{II.VIOF}" symbol="R$ " symbolPosition="p"
                                                                                           thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </p:row>
                                                        </p:tab>
                                                        <p:tab title="ICMS">
                                                            <h5>Imposto sobre Circulação de Mercadorias e Serviços</h5>
                                                            <p:row rendered="#{item.imposto.content.get('ICMS') eq null}">
                                                                <div class="text-center">
                                                                    <p:commandButton actionListener="#{notaFiscalProdutoControle.addimposto(item, 'ICMS')}"
                                                                                     value="Adicionar" process="@this" update="form:tblProdutos:#{i}:imposto, form:totais"/>
                                                                </div>
                                                            </p:row>
                                                            <p:row rendered="#{item.imposto.content.get('ICMS') ne null}">
                                                                <c:set var="ICMS" value="#{item.imposto.content.get('ICMS')}"/>
                                                                <c:set var="icmsSelecionado" value="#{item.imposto.ICMS.impostoPreenchido}"/>
                                                                <c:set var="codIcms" value="#{icmsSelecionado.class.simpleName.substring(4)}"/>

                                                                <div class="row">
                                                                    <div class="col">
                                                                        <div class="card p-0 mb-2">
                                                                            <div class="card-header">
                                                                                ICMS selecionado: #{icmsSelecionado.class.simpleName}
                                                                            </div>
                                                                            <div class="card-body">
                                                                                <div class="row align-items-end">
                                                                                    <p:row styleClass="orig" rendered="true">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Origem da mercadoria"/>
                                                                                                <p:selectOneMenu value="#{icmsSelecionado.orig}"
                                                                                                                 required="#{codIcms ne '90' and codIcms ne '900'}">
                                                                                                    <f:selectItem itemLabel="-- Selecione --" noSelectionOption="true"/>
                                                                                                    <f:selectItem itemValue="0" itemLabel="0 - Nacional, exceto as indicadas nos códigos 3, 4, 5 e 8"/>
                                                                                                    <f:selectItem itemValue="1" itemLabel="1 - Estrangeira - Importação direta, exceto a indicada no código 6"/>
                                                                                                    <f:selectItem itemValue="2" itemLabel="2 - Estrangeira - Adquirida no mercado interno, exceto a indicada no código 7"/>
                                                                                                    <f:selectItem itemValue="3" itemLabel="3 - Nacional, mercadoria ou bem com Conteúdo de Importação superior a 40% e inferior ou igual a 70%"/>
                                                                                                    <f:selectItem itemValue="4" itemLabel="4 - Nacional, cuja produção tenha sido feita em conformidade com os processos produtivos básicos de que tratam as legislações citadas nos Ajustes"/>
                                                                                                    <f:selectItem itemValue="5" itemLabel="5 - Nacional, mercadoria ou bem com Conteúdo de Importação inferior ou igual a 40%"/>
                                                                                                    <f:selectItem itemValue="6" itemLabel="6 - Estrangeira - Importação direta, sem similar nacional, constante em lista da CAMEX e gás natural"/>
                                                                                                    <f:selectItem itemValue="7" itemLabel="7 - Estrangeira - Adquirida no mercado interno, sem similar nacional, constante em lista da CAMEX e gás natural"/>
                                                                                                    <f:selectItem itemValue="8" itemLabel="8 - Nacional, mercadoria ou bem com Conteúdo de Importação superior a 70%"/>
                                                                                                </p:selectOneMenu>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="CST" rendered="#{!empresaControle.empresaPertenceAoSimplesNacional()}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Tributação do ICMS"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.CST}" symbol="R$ " symbolPosition="p"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                                                               disabled="#{true}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="modBC" rendered="#{notaFiscalProdutoControle.contains(codIcms, [0, 10, 20, 51, 70, 90, 900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Modalidade de determinação da BC do ICMS"/>
                                                                                                <p:selectOneMenu value="#{icmsSelecionado.modBC}"
                                                                                                                 required="#{notaFiscalProdutoControle.contains(codIcms, [00, 10, 20, 70])}">
                                                                                                    <f:selectItem itemLabel="-- Selecione --" noSelectionOption="true"/>
                                                                                                    <f:selectItem itemValue="0" itemLabel="Preço tabelado ou máximo sugerido"/>
                                                                                                    <f:selectItem itemValue="1" itemLabel="Lista negativa (valor)"/>
                                                                                                    <f:selectItem itemValue="2" itemLabel="Lista positiva (valor)"/>
                                                                                                    <f:selectItem itemValue="3" itemLabel="Lista neutra (valor)"/>
                                                                                                    <f:selectItem itemValue="4" itemLabel="MVA (%)"/>
                                                                                                    <f:selectItem itemValue="5" itemLabel="Pauta (valor)"/>
                                                                                                </p:selectOneMenu>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="PRedBC" rendered="#{notaFiscalProdutoControle.contains(codIcms, [20, 51, 70, 90, 900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Percentual da Redução de BC"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.PRedBC}" symbol="%" symbolPosition="s"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="4"
                                                                                                               required="#{notaFiscalProdutoControle.contains(codIcms, [20, 70])}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="VBC" rendered="#{notaFiscalProdutoControle.contains(codIcms, [0, 10, 20, 51, 70, 90, 900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Valor da BC do ICMS"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.VBC}" symbol="R$ " symbolPosition="p"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                                                               required="#{notaFiscalProdutoControle.contains(codIcms, [00, 10, 20, 70])}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="PICMS" rendered="#{notaFiscalProdutoControle.contains(codIcms, [0, 10, 20, 51, 70, 90, 900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Alíquota do imposto"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.PICMS}" symbol="%" symbolPosition="s"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="4"
                                                                                                               required="#{notaFiscalProdutoControle.contains(codIcms, [00, 10, 20, 70])}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="VICMS" rendered="#{notaFiscalProdutoControle.contains(codIcms, [0, 10, 20, 51, 70, 90, 900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Valor do ICMS"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.VICMS}" symbol="R$ " symbolPosition="p"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                                                               required="#{notaFiscalProdutoControle.contains(codIcms, [00, 10, 20, 70])}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="modBCST" rendered="#{notaFiscalProdutoControle.contains(codIcms, [10, 30, 70, 90, 201, 202, 203, 900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Modalidade de determinação da BC do ICMS ST"/>
                                                                                                <p:selectOneMenu value="#{icmsSelecionado.modBCST}"
                                                                                                                 required="#{notaFiscalProdutoControle.contains(codIcms, [10, 30, 70, 201, 202, 203])}">
                                                                                                    <f:selectItem itemLabel="-- Selecione --" noSelectionOption="true"/>
                                                                                                    <f:selectItem itemValue="0" itemLabel="Preço tabelado ou máximo sugerido"/>
                                                                                                    <f:selectItem itemValue="1" itemLabel="Lista negativa (valor)"/>
                                                                                                    <f:selectItem itemValue="2" itemLabel="Lista positiva (valor)"/>
                                                                                                    <f:selectItem itemValue="3" itemLabel="Lista neutra (valor)"/>
                                                                                                    <f:selectItem itemValue="4" itemLabel="MVA (%)"/>
                                                                                                    <f:selectItem itemValue="5" itemLabel="Pauta (valor)"/>
                                                                                                </p:selectOneMenu>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="PMVAST" rendered="#{notaFiscalProdutoControle.contains(codIcms, [10, 30, 70, 90, 201, 202, 203, 900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Percentual da margem de valor Adicionado do ICMS ST"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.PMVAST}" symbol="%" symbolPosition="s"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="4"
                                                                                                               required="#{notaFiscalProdutoControle.contains(codIcms, [10, 30, 70, 201, 202, 203])}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="PRedBCST" rendered="#{notaFiscalProdutoControle.contains(codIcms, [10, 30, 70, 90, 201, 202, 203, 900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Percentual da Redução de BC do ICMS ST"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.PRedBCST}" symbol="%" symbolPosition="s"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="4"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="VBCST" rendered="#{notaFiscalProdutoControle.contains(codIcms, [10, 30, 70, 90, 201, 202, 203, 900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Valor da BC do ICMS ST"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.VBCST}" symbol="R$ " symbolPosition="p"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                                                               required="#{notaFiscalProdutoControle.contains(codIcms, [10, 30, 70, 201, 202, 203])}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="PICMSST" rendered="#{notaFiscalProdutoControle.contains(codIcms, [10, 30, 70, 90, 201, 202, 203, 900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Alíquota do imposto do ICMS ST"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.PICMSST}" symbol="%" symbolPosition="s"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="4"
                                                                                                               required="#{notaFiscalProdutoControle.contains(codIcms, [10, 30, 70, 201, 202, 203])}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="VICMSST" rendered="#{notaFiscalProdutoControle.contains(codIcms, [10, 30, 70, 90, 201, 202, 203, 900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Valor do ICMS ST"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.VICMSST}" symbol="R$ " symbolPosition="p"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                                                               required="#{notaFiscalProdutoControle.contains(codIcms, [10, 30, 70, 201, 202, 203])}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="UFST" rendered="#{notaFiscalProdutoControle.contains(codIcms, [])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input"><p:importEnum type="br.com.swconsultoria.nfe.schema_4.enviNFe.TUf" var="TUf"/>
                                                                                                <p:outputLabel for="@next" value="UF para qual é devido o ICMS ST"/>

                                                                                                <p:selectOneMenu value="#{icmsSelecionado.UFST}">
                                                                                                    <f:selectItem itemLabel="-- Selecione --" noSelectionOption="true"/>
                                                                                                    <f:selectItems value="#{TUf.ALL_VALUES}" var="enum" itemLabel="#{enum}" itemValue="#{enum}"/>
                                                                                                </p:selectOneMenu>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="PBCop" rendered="#{notaFiscalProdutoControle.contains(codIcms, [])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Percentual da BC operação própria"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.PBCop}" symbol="%" symbolPosition="s"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="4"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="VBCSTRet" rendered="#{notaFiscalProdutoControle.contains(codIcms, [41, 60, 500, 900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Valor da BC do ICMS Retido Anteriormente"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.VBCSTRet}" symbol="R$ " symbolPosition="p"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                                                               required="#{notaFiscalProdutoControle.contains(codIcms, [41, 60, 500])}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="VICMSSTRet" rendered="#{notaFiscalProdutoControle.contains(codIcms, [41, 60, 500, 900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Valor do ICMS Retido Anteriormente"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.VICMSSTRet}" symbol="R$ " symbolPosition="p"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                                                               required="#{notaFiscalProdutoControle.contains(codIcms, [41, 60, 500])}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="motDesICMS" rendered="#{notaFiscalProdutoControle.contains(codIcms, [20, 30, 40, 41, 50, 900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Motivo da desoneração do ICMS"/>
                                                                                                <p:selectOneMenu value="#{icmsSelecionado.motDesICMS}">
                                                                                                    <f:selectItem itemValue="0" itemLabel="Sem isenção condicional"/>
                                                                                                    <f:selectItem itemValue="1" itemLabel="Táxi"/>
                                                                                                    <f:selectItem itemValue="2" itemLabel="Deficiente Físico"/>
                                                                                                    <f:selectItem itemValue="3" itemLabel="Produtor Agropecuário"/>
                                                                                                    <f:selectItem itemValue="4" itemLabel="Frotista/Locadora"/>
                                                                                                    <f:selectItem itemValue="5" itemLabel="Diplomático/Consular"/>
                                                                                                    <f:selectItem itemValue="6" itemLabel="Utilitários e Motocicletas da Amazônia Ocidental e Áreas de Livre Comércio (Resolução 714/88 e 790/94 - CONTRAN e suas alterações)"/>
                                                                                                    <f:selectItem itemValue="7" itemLabel="SUFRAMA"/>
                                                                                                    <f:selectItem itemValue="8" itemLabel="Venda a Órgãos Públicos"/>
                                                                                                    <f:selectItem itemValue="9" itemLabel="Outros"/>
                                                                                                    <f:selectItem itemValue="10" itemLabel="Deficiente Condutor"/>
                                                                                                    <f:selectItem itemValue="11" itemLabel="Deficiente não condutor"/>
                                                                                                    <f:selectItem itemValue="16" itemLabel="Olimpíadas Rio 2016"/>
                                                                                                    <f:selectItem itemValue="90" itemLabel="Solicitação do Fisco"/>
                                                                                                </p:selectOneMenu>
                                                                                                <small>Informar em conjunto com o "Valor do ICMS da desoneração".</small>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="VBCSTDest" rendered="#{notaFiscalProdutoControle.contains(codIcms, [900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Valor da BC do ICMS ST da UF destino"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.VBCSTDest}" symbol="R$ " symbolPosition="p"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="VICMSSTDest" rendered="#{notaFiscalProdutoControle.contains(codIcms, [900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Valor do ICMS ST da UF destino"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.VICMSSTDest}" symbol="R$ " symbolPosition="p"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="PCredSN" rendered="#{notaFiscalProdutoControle.contains(codIcms, [101, 201, 900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Alíquota aplicável de cálculo do crédito (Simples Nacional)"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.PCredSN}" symbol="%" symbolPosition="s"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="4"
                                                                                                               required="#{notaFiscalProdutoControle.contains(codIcms, [101, 201])}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="VCredICMSSN" rendered="#{notaFiscalProdutoControle.contains(codIcms, [101, 201, 900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Valor crédito do ICMS que pode ser aproveitado nos termos do art. 23 da LC 123 (SIMPLES NACIONAL)"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.VCredICMSSN}" symbol="R$ " symbolPosition="p"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                                                               required="#{notaFiscalProdutoControle.contains(codIcms, [101, 201])}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="VICMSDeson" rendered="#{notaFiscalProdutoControle.contains(codIcms, [20, 30, 40, 41, 50, 70, 90])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Valor do ICMS da desoneração"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.VICMSDeson}" symbol="R$ " symbolPosition="p"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="VICMSOp" rendered="#{notaFiscalProdutoControle.contains(codIcms, [51])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Valor do ICMS da Operação"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.VICMSOp}" symbol="R$ " symbolPosition="p"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="PDif" rendered="#{notaFiscalProdutoControle.contains(codIcms, [51])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Percentual do diferimento"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.PDif}" symbol="%" symbolPosition="s"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="4"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="VICMSDif" rendered="#{notaFiscalProdutoControle.contains(codIcms, [51 ])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Valor do ICMS diferido"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.VICMSDif}" symbol="R$ " symbolPosition="p"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="VBCFCP" rendered="#{notaFiscalProdutoControle.contains(codIcms, [10, 20, 51, 70, 90])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Valor da Base de Cálculo do FCP"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.VBCFCP}" symbol="R$ " symbolPosition="p"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="PFCP" rendered="#{notaFiscalProdutoControle.contains(codIcms, [0, 10, 20, 51, 70, 90])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Percentual do FCP"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.PFCP}" symbol="%" symbolPosition="s"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="4"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="VFCP" rendered="#{notaFiscalProdutoControle.contains(codIcms, [0, 10, 20, 51, 70, 90])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Valor do FCP"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.VFCP}" symbol="R$ " symbolPosition="p"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="VBCFCPST" rendered="#{notaFiscalProdutoControle.contains(codIcms, [10, 30, 70, 90, 201, 202, 203, 900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Valor da Base de Cálculo do FCP retido por Substituição Tributária"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.VBCFCPST}" symbol="R$ " symbolPosition="p"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                                                               required="#{notaFiscalProdutoControle.contains(codIcms, [201, 202, 203])}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="PFCPST" rendered="#{notaFiscalProdutoControle.contains(codIcms, [10, 30, 70, 90, 201, 202, 203, 900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Percentual do FCP retido por Substituição Tributária"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.PFCPST}" symbol="%" symbolPosition="s"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="4"
                                                                                                               required="#{notaFiscalProdutoControle.contains(codIcms, [201, 202, 203])}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="VFCPST" rendered="#{notaFiscalProdutoControle.contains(codIcms, [10, 30, 70, 90, 201, 202, 203, 900])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Valor do FCP retido por Substituição Tributária"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.VFCPST}" symbol="R$ " symbolPosition="p"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                                                               required="#{notaFiscalProdutoControle.contains(codIcms, [201, 202, 203])}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="VBCFCPSTRet" rendered="#{notaFiscalProdutoControle.contains(codIcms, [60, 500])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Valor da BC do FCP retido anteriormente por Substituição Tributária"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.VBCFCPSTRet}" symbol="R$ " symbolPosition="p"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                                                               required="#{notaFiscalProdutoControle.contains(codIcms, [60])}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="PFCPSTRet" rendered="#{notaFiscalProdutoControle.contains(codIcms, [60, 500])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Alíquota do FCP retido anteriormente por Substituição Tributária"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.PFCPSTRet}" symbol="%" symbolPosition="s"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="4"
                                                                                                               required="#{notaFiscalProdutoControle.contains(codIcms, [60])}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="VFCPSTRet" rendered="#{notaFiscalProdutoControle.contains(codIcms, [60, 500])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Valor do FCP retido anteriormente por Substituição Tributária"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.VFCPSTRet}" symbol="R$ " symbolPosition="p"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                                                               required="#{notaFiscalProdutoControle.contains(codIcms, [60])}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row styleClass="PST" rendered="#{notaFiscalProdutoControle.contains(codIcms, [60, 500])}">
                                                                                        <div class="col-2">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <p:outputLabel for="@next" value="Alíquota suportada pelo Consumidor Final"/>
                                                                                                <p:inputNumber value="#{icmsSelecionado.PST}" symbol="%" symbolPosition="s"
                                                                                                               thousandSeparator="." decimalSeparator="," decimalPlaces="4"
                                                                                                               required="#{notaFiscalProdutoControle.contains(codIcms, [60, 500])}"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </p:row>
                                                        </p:tab>
                                                        <p:tab title="COFINSST">
                                                            <h5>Contribuição para o Financiamento da Seguridade Social (Substituição tributária)</h5>
                                                            <p:row rendered="#{item.imposto.content.get('COFINSST') eq null}">
                                                                <div class="text-center">
                                                                    <p:commandButton actionListener="#{notaFiscalProdutoControle.addimposto(item, 'COFINSST')}"
                                                                                     value="Adicionar" process="@this" update="form:tblProdutos:#{i}:imposto, form:totais"/>
                                                                </div>
                                                            </p:row>
                                                            <p:row rendered="#{item.imposto.content.get('COFINSST') ne null}">
                                                                <c:set var="COFINSST" value="#{item.imposto.content.get('COFINSST')}"/>
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <div class="form-group form-md-line-input">
                                                                            <p:outputLabel for="@next" value="Valor do COFINS ST"/>
                                                                            <p:inputNumber value="#{COFINSST.VCOFINS}" symbol="R$ " symbolPosition="p"
                                                                                           thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col">
                                                                        <div class="card card-w-title p-0">
                                                                            <div class="card-header">Alíquota ad valorem</div>
                                                                            <div class="card-body">
                                                                                <div class="row">
                                                                                    <div class="col">
                                                                                        <div>
                                                                                            <p:outputLabel for="@next" value="BC COFINS ST"/>
                                                                                            <p:inputNumber value="#{COFINSST.VBC}" symbol="R$ " symbolPosition="p"
                                                                                                           thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="col">
                                                                                        <div>
                                                                                            <p:outputLabel for="@next" value="Aliquota do COFINS ST"/>
                                                                                            <p:inputNumber value="#{COFINSST.PCOFINS}" symbol="%" symbolPosition="s"
                                                                                                           thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col">
                                                                        <div class="card card-w-title p-0">
                                                                            <div class="card-header">Alíquota específica</div>
                                                                            <div class="card-body">
                                                                                <div class="row">
                                                                                    <div class="col">
                                                                                        <div>
                                                                                            <p:outputLabel for="@next" value="Quantidade vendida"/>
                                                                                            <p:inputNumber value="#{COFINSST.QBCProd}"
                                                                                                           thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="col">
                                                                                        <div>
                                                                                            <p:outputLabel for="@next" value="Alíquota do COFINS ST"/>
                                                                                            <p:inputNumber value="#{COFINSST.VAliqProd}" symbol="R$ " symbolPosition="p"
                                                                                                           thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <small>Preencher ou os campos do <i>Alíquota ad valorem</i> ou os do <i>Alíquota específica</i>.</small>
                                                            </p:row>
                                                        </p:tab>
                                                        <p:tab title="COFINS">
                                                            <h5>Contribuição para o Financiamento da Seguridade Social</h5>
                                                            <p:row rendered="#{item.imposto.content.get('COFINS') eq null}">
                                                                <div class="text-center">
                                                                    <p:commandButton actionListener="#{notaFiscalProdutoControle.addimposto(item, 'COFINS')}"
                                                                                     value="Adicionar" process="@this" update="form:tblProdutos:#{i}:imposto, form:totais"/>
                                                                </div>
                                                            </p:row>
                                                            <p:row rendered="#{item.imposto.content.get('COFINS') ne null}">
                                                                <c:set var="COFINS" value="#{item.imposto.content.get('COFINS')}"/>

                                                                <div class="row">
                                                                    <div class="col">
                                                                        <div class="card p-0 mb-2">
                                                                            <div class="card-header">
                                                                                COFINS selecionado:
                                                                                <p:selectOneMenu value="#{COFINS.tipoCOFINS}" styleClass="inlineSelector">
                                                                                    <f:selectItem itemLabel="Selecione" noSelectionOption="true"/>
                                                                                    <f:selectItem itemValue="COFINSAliq" itemLabel="COFINSAliq"/>
                                                                                    <f:selectItem itemValue="COFINSQtde" itemLabel="COFINSQtde"/>
                                                                                    <f:selectItem itemValue="COFINSNT" itemLabel="COFINSNT"/>
                                                                                    <f:selectItem itemValue="COFINSOutr" itemLabel="COFINSOutr"/>
                                                                                    <p:ajax process="@this" update="form:tblProdutos:#{i}:imposto:COFINSs" listener="#{notaFiscalProdutoControle.changeCOFINS(COFINS)}"/>
                                                                                </p:selectOneMenu>
                                                                            </div>
                                                                            <div class="card-body">
                                                                                <p:outputPanel id="COFINSs">
                                                                                    <p:row rendered="#{COFINS.tipoCOFINS eq null}">
                                                                                        Selecione o tipo do COFINS
                                                                                    </p:row>
                                                                                    <p:row rendered="#{COFINS.tipoCOFINS eq 'COFINSAliq'}">
                                                                                        <div class="row">
                                                                                            <div class="col-2">
                                                                                                <p:outputLabel for="@next" value="CST"/>
                                                                                                <p:selectOneMenu value="#{COFINS.COFINSAliq.CST}" var="t" filter="true"
                                                                                                                 filterMatchMode="startsWith" converter="#{genericConverter}">
                                                                                                    <p:column>
                                                                                                        <h:outputText value="#{t.codigo}"/>
                                                                                                    </p:column>
                                                                                                    <p:column>
                                                                                                        <h:outputText value="#{t.descricao}"/>
                                                                                                    </p:column>

                                                                                                    <f:selectItem itemLabel="--" noSelectionOption="true"/>
                                                                                                    <f:selectItems value="#{cstControle.csts}"  var="cst" itemLabel="#{cst.codigo}" itemValue="#{cst}"/>
                                                                                                </p:selectOneMenu>
                                                                                            </div>
                                                                                            <div class="col">
                                                                                                <div class="form-group form-md-line-input">
                                                                                                    <p:outputLabel for="@next" value="BC"/>
                                                                                                    <p:inputNumber value="#{COFINS.COFINSAliq.VBC}"
                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col">
                                                                                                <div class="form-group form-md-line-input">
                                                                                                    <p:outputLabel for="@next" value="Alíquota do COFINS"/>
                                                                                                    <p:inputNumber value="#{COFINS.COFINSAliq.PCOFINS}" symbol="%" symbolPosition="s"
                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col">
                                                                                                <div class="form-group form-md-line-input">
                                                                                                    <p:outputLabel for="@next" value="Valor do COFINS"/>
                                                                                                    <p:inputNumber value="#{COFINS.COFINSAliq.VCOFINS}" symbol="R$ " symbolPosition="p"
                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row rendered="#{COFINS.tipoCOFINS eq 'COFINSQtde'}">
                                                                                        <div class="row">
                                                                                            <div class="col-2">
                                                                                                <p:outputLabel for="@next" value="CST"/>
                                                                                                <p:selectOneMenu value="#{COFINS.COFINSQtde.CST}" var="t" filter="true"
                                                                                                                 filterMatchMode="startsWith" converter="#{genericConverter}">
                                                                                                    <p:column>
                                                                                                        <h:outputText value="#{t.codigo}"/>
                                                                                                    </p:column>
                                                                                                    <p:column>
                                                                                                        <h:outputText value="#{t.descricao}"/>
                                                                                                    </p:column>

                                                                                                    <f:selectItem itemLabel="--" noSelectionOption="true"/>
                                                                                                    <f:selectItems value="#{cstControle.csts}"  var="cst" itemLabel="#{cst.codigo}" itemValue="#{cst}"/>
                                                                                                </p:selectOneMenu>
                                                                                            </div>
                                                                                            <div class="col">
                                                                                                <div class="form-group form-md-line-input">
                                                                                                    <p:outputLabel for="@next" value="Qte. vendida"/>
                                                                                                    <p:inputNumber value="#{COFINS.COFINSQtde.QBCProd}"
                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col">
                                                                                                <div class="form-group form-md-line-input">
                                                                                                    <p:outputLabel for="@next" value="Alíquota do COFINS"/>
                                                                                                    <p:inputNumber value="#{COFINS.COFINSQtde.VAliqProd}" symbol="R$ " symbolPosition="p"
                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col">
                                                                                                <div class="form-group form-md-line-input">
                                                                                                    <p:outputLabel for="@next" value="Valor do COFINS"/>
                                                                                                    <p:inputNumber value="#{COFINS.COFINSQtde.VCOFINS}" symbol="R$ " symbolPosition="p"
                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row rendered="#{COFINS.tipoCOFINS eq 'COFINSNT'}">
                                                                                        <div class="row">
                                                                                            <div class="col-2">
                                                                                                <p:outputLabel for="@next" value="CST"/>
                                                                                                <p:selectOneMenu value="#{COFINS.COFINSNT.CST}" var="t" filter="true"
                                                                                                                 filterMatchMode="startsWith" converter="#{genericConverter}">
                                                                                                    <p:column>
                                                                                                        <h:outputText value="#{t.codigo}" />
                                                                                                    </p:column>
                                                                                                    <p:column>
                                                                                                        <h:outputText value="#{t.descricao}" />
                                                                                                    </p:column>

                                                                                                    <f:selectItem itemLabel="--" noSelectionOption="true"/>
                                                                                                    <f:selectItems value="#{cstControle.csts}"  var="cst" itemLabel="#{cst.codigo}" itemValue="#{cst}"/>
                                                                                                </p:selectOneMenu>
                                                                                            </div>
                                                                                        </div>
                                                                                    </p:row>
                                                                                    <p:row rendered="#{COFINS.tipoCOFINS eq 'COFINSOutr'}">
                                                                                        <div class="row">
                                                                                            <div class="col-2">
                                                                                                <p:outputLabel for="@next" value="CST"/>
                                                                                                <p:selectOneMenu value="#{COFINS.COFINSOutr.CST}" var="t" filter="true"
                                                                                                                 filterMatchMode="startsWith" converter="#{genericConverter}">
                                                                                                    <p:column>
                                                                                                        <h:outputText value="#{t.codigo}"/>
                                                                                                    </p:column>
                                                                                                    <p:column>
                                                                                                        <h:outputText value="#{t.descricao}"/>
                                                                                                    </p:column>

                                                                                                    <f:selectItem itemLabel="--" noSelectionOption="true"/>
                                                                                                    <f:selectItems value="#{cstControle.csts}"  var="cst" itemLabel="#{cst.codigo}" itemValue="#{cst}"/>
                                                                                                </p:selectOneMenu>
                                                                                                <br/>
                                                                                                <div class="form-group form-md-line-input">
                                                                                                    <p:outputLabel for="@next" value="Valor do COFINS"/>
                                                                                                    <p:inputNumber value="#{COFINS.COFINSOutr.VCOFINS}" symbol="R$ " symbolPosition="p"
                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col">
                                                                                                <div class="card card-w-title p-0">
                                                                                                    <div class="card-header">Alíquota ad valorem</div>
                                                                                                    <div class="card-body">
                                                                                                        <div class="row">
                                                                                                            <div class="col">
                                                                                                                <div>
                                                                                                                    <p:outputLabel for="@next" value="BC"/>
                                                                                                                    <p:inputNumber value="#{COFINS.COFINSOutr.VBC}" symbol="R$ " symbolPosition="p"
                                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="col">
                                                                                                                <div>
                                                                                                                    <p:outputLabel for="@next" value="Alíquota do COFINS"/>
                                                                                                                    <p:inputNumber value="#{COFINS.COFINSOutr.PCOFINS}" symbol="%" symbolPosition="s"
                                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col">
                                                                                                <div class="card card-w-title p-0">
                                                                                                    <div class="card-header">Alíquota específica</div>
                                                                                                    <div class="card-body">
                                                                                                        <div class="row">
                                                                                                            <div class="col">
                                                                                                                <div>
                                                                                                                    <p:outputLabel for="@next" value="Quantidade vendida"/>
                                                                                                                    <p:inputNumber value="#{COFINS.COFINSOutr.QBCProd}"
                                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="col">
                                                                                                                <div>
                                                                                                                    <p:outputLabel for="@next" value="Alíquota do COFINS"/>
                                                                                                                    <p:inputNumber value="#{COFINS.COFINSOutr.VAliqProd}" symbol="R$ " symbolPosition="p"
                                                                                                                                   thousandSeparator="." decimalSeparator="," decimalPlaces="2"/>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <small>Preencher ou os campos do <i>Alíquota ad valorem</i> ou os do <i>Alíquota específica</i>.</small>
                                                                                    </p:row>
                                                                                </p:outputPanel>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </p:row>
                                                        </p:tab>
                                                    </p:tabView>
                                                </p:row>
                                                <p:row rendered="#{!cstCsosnInformado}">
                                                    <div class="text-center">
                                                        Informe o #{empresaControle.empresaPertenceAoSimplesNacional() ? 'CSOSN' : 'CST'} antes!
                                                    </div>
                                                </p:row>
                                            </p:rowExpansion>

                                            <p:column headerText="Produto" style="text-align:left;min-width: 120px;" rendered="#{notaFiscalProdutoControle.nivelExibicao ge 0}">
                                                <p:row rendered="#{notaFiscalProdutoControle.nfSelecionado.tipoGeracao eq EnumTipoGeracaoNF.AVULSO.tipo}">
                                                    <p:selectOneMenu value="#{item.prod.idProduto.value}" converter="#{genericConverter}" panelStyle="width:500px"
                                                                     effect="fade" var="pro" filter="true" filterMatchMode="startsWith">

                                                        <p:column>
                                                            <h:outputText value="#{pro.descricao}"/>
                                                        </p:column>

                                                        <f:selectItem noSelectionOption="true" itemLabel="-- Selecione --"/>
                                                        <f:selectItems value="#{produtoControle.produtos}" var="pro" itemLabel="#{pro.descricao}" itemValue="#{pro}"/>
                                                        <p:ajax process="@this" update="tblProdutos"/>
                                                    </p:selectOneMenu>
                                                </p:row>
                                                <p:row rendered="#{notaFiscalProdutoControle.nfSelecionado.tipoGeracao ne EnumTipoGeracaoNF.AVULSO.tipo}">
                                                    <h:outputText value="#{item.prod.XProd}"/>
                                                </p:row>
                                            </p:column>

                                            <p:column headerText="NCM" width="135" rendered="#{notaFiscalProdutoControle.nivelExibicao ge 2}">
                                                <p:autoComplete value="#{item.prod.idNcm.value}" forceSelection="true" widgetVar="ncm" var="ncm" converter="#{genericConverter}"
                                                                completeMethod="#{notaFiscalProdutoControle.listarNcm}" style="width: 100%;max-width: 500px;"
                                                                itemLabel="#{ncm.codigo}" itemValue="#{ncm}" onclick="PF('ncm').search(PF('ncm').input.get(0).value)">
                                                    <p:column style="width:10%">
                                                        <h:outputText value="#{ncm.codigo}"/>
                                                    </p:column>

                                                    <p:column>
                                                        <h:outputText value="#{ncm.descricao}"/>
                                                    </p:column>
                                                </p:autoComplete>
                                            </p:column>

                                            <p:column headerText="CFOP" width="70" >
                                                <p:selectOneMenu id="somCfop" value="#{item.prod.idCfop.value}" panelStyle="width:500px" effect="fade"
                                                                 var="t" filter="true" filterMatchMode="startsWith" converter="#{genericConverter}"
                                                                 required="true" requiredMessage="Informe o CFOP do produto #{item.prod.idProduto.value.descricao}">
                                                    <p:column>
                                                        <h:outputText value="#{t.codigo}" />
                                                    </p:column>
                                                    <p:column>
                                                        <h:outputText value="#{t.descricao}" />
                                                    </p:column>

                                                    <f:selectItem itemLabel="--" noSelectionOption="true"/>
                                                    <f:selectItems value="#{cfopControle.getCfops(notaFiscalProdutoControle.nfSelecionado)}"
                                                                   var="cfop" itemLabel="#{cfop.codigo}" itemValue="#{cfop}"/>
                                                </p:selectOneMenu>
                                            </p:column>

                                            <p:column headerText="CST" width="60" rendered="#{!empresaControle.empresaPertenceAoSimplesNacional() and notaFiscalProdutoControle.nivelExibicao ge 1}">
                                                <p:selectOneMenu id="somCst" value="#{item.idCst.value}" panelStyle="width:500px" effect="fade"
                                                                 var="t" filter="true" filterMatchMode="startsWith" converter="#{genericConverter}"
                                                                 required="true" requiredMessage="Informe o CST do produto #{item.prod.idProduto.value.descricao}">
                                                    <p:column>
                                                        <h:outputText value="#{t.codigo}" />
                                                    </p:column>
                                                    <p:column>
                                                        <h:outputText value="#{t.descricao}" />
                                                    </p:column>

                                                    <f:selectItem itemLabel="--" noSelectionOption="true"/>
                                                    <f:selectItems value="#{cstControle.csts}"  var="cst" itemLabel="#{cst.codigo}" itemValue="#{cst}"/>
                                                    <p:ajax process="@this"/>
                                                </p:selectOneMenu>
                                            </p:column>

                                            <p:column headerText="CSOSN" width="100" rendered="#{empresaControle.empresaPertenceAoSimplesNacional() and notaFiscalProdutoControle.nivelExibicao ge 1}">
                                                <p:selectOneMenu id="somCsosn" value="#{item.idCsosn.value}" panelStyle="width:500px" effect="fade"
                                                                 filter="true" filterMatchMode="startsWith" var="t" converter="#{genericConverter}"
                                                                 required="true" requiredMessage="Informe o CSOSN do produto #{item.prod.idProduto.value.descricao}">
                                                    <p:column>
                                                        <h:outputText value="#{t.codigo}" />
                                                    </p:column>
                                                    <p:column>
                                                        <h:outputText value="#{t.descricao}" />
                                                    </p:column>
                                                    <f:selectItem itemLabel="-- -- " noSelectionOption="true"/>
                                                    <f:selectItems value="#{csosnControle.csosns}"  var="csosn" itemLabel="#{csosn.codigo}" itemValue="#{csosn}"/>
                                                    <p:ajax process="@this"/>
                                                </p:selectOneMenu>
                                            </p:column>

                                            <p:column headerText="Qtd" rendered="#{notaFiscalProdutoControle.nivelExibicao ge 1}" width="90">
                                                <p:inputNumber value="#{item.prod.QCom}" thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                               required="true" requiredMessage="Informe a quantidade do produto #{item.prod.idProduto.value.descricao}">
                                                    <p:ajax event="blur"
                                                            process="@this, tblProdutos"
                                                            immediate="true" update="tblProdutos"/>
                                                </p:inputNumber>
                                            </p:column>

                                            <p:column headerText="Valor unitário" styleClass="valor"
                                                      rendered="#{notaFiscalProdutoControle.nivelExibicao ge 1}"
                                                      width="90">
                                                <p:inputNumber value="#{item.prod.VUnTrib}" symbol="R$ " thousandSeparator="." decimalSeparator=","
                                                               decimalPlaces="2" required="true"
                                                               requiredMessage="Informe o valor do produto #{item.prod.idProduto.value.descricao}">
                                                    <p:ajax event="blur"
                                                            process="@this, tblProdutos"
                                                            immediate="true" update="tblProdutos"/>
                                                </p:inputNumber>
                                            </p:column>

                                            <p:column headerText="Desconto" styleClass="valor"
                                                      rendered="#{notaFiscalProdutoControle.nivelExibicao ge 1}"
                                                      width="90">
                                                <p:inputNumber value="#{item.prod.VDesc}"
                                                               symbol="R$ " thousandSeparator="."
                                                               decimalSeparator=","
                                                               decimalPlaces="2">
                                                    <p:ajax event="blur"
                                                            process="@this, tblProdutos"
                                                            immediate="true" update="tblProdutos"/>
                                                </p:inputNumber>
                                            </p:column>

                                            <p:column headerText="Valor total"
                                                      style="text-align:right" styleClass="valor"
                                                      rendered="#{notaFiscalProdutoControle.nivelExibicao ge 0}"
                                                      width="90">
                                                <h:outputText value="#{item.prod.VProd}"
                                                              rendered="#{item.prod.VDesc eq null}">
                                                    <f:convertNumber locale="pt_BR"
                                                                     type="currency"/>
                                                </h:outputText>
                                                <p:row rendered="#{item.prod.VDesc ne null}">
                                                    <s>
                                                        <h:outputText value="#{item.prod.VProd}"
                                                                      style="color: red;">
                                                            <f:convertNumber locale="pt_BR"
                                                                             type="currency"/>
                                                        </h:outputText>
                                                    </s>
                                                    <br/>
                                                    <h:outputText
                                                        value="#{item.prod.VProd - item.prod.VDesc}">
                                                        <f:convertNumber locale="pt_BR"
                                                                         type="currency"/>
                                                    </h:outputText>
                                                </p:row>
                                            </p:column>

                                            <p:column headerText="" style="text-align: center;" width="20"
                                                      rendered="#{notaFiscalProdutoControle.nfSelecionado.tipoGeracao eq EnumTipoGeracaoNF.AVULSO.tipo}">
                                                <p:commandLink styleClass="btn btn-circle btn-icon-only btn-default icones" title="Remover"
                                                               process="@this, tblProdutos" action="#{notaFiscalProdutoControle.removeProduto(item)}" update="tblProdutos">
                                                    <i class="fa fa-trash-o"></i>
                                                </p:commandLink>
                                            </p:column>

                                            <p:columnGroup type="footer">
                                                <p:row rendered="false">
                                                    <p:column colspan="7" footerText="Total" style="text-align:right; font-weight: bold"/>
                                                    <p:column footerText="#{notaFiscalProdutoControle.valorTotalComDesconto}" style="text-align:right; font-weight: bold"/>
                                                </p:row>
                                            </p:columnGroup>

                                        </p:dataTable>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6 col-sm-12">
                            <div class="card card-w-title h-100">
                                <p:row rendered="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.ide.tpEmis ne '4'}">
                                    <h5>Cliente</h5>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Cliente"/>
                                                <p:selectOneMenu value="#{notaFiscalProdutoControle.nfSelecionado.idCliente}"
                                                                 panelStyle="width:180px" effect="fade"
                                                                 var="t" style="width:160px" filter="true" filterMatchMode="startsWith"
                                                                 converter="#{genericConverter}">
                                                    <p:column>
                                                        <h:outputText value="#{t.nome}"/>
                                                    </p:column>

                                                    <f:selectItem itemLabel="-- Selecione -- " noSelectionOption="true"/>
                                                    <f:selectItems value="#{clienteControle.listarClientes()}" var="cliente" itemLabel="#{cliente.nome}" itemValue="#{cliente}"/>
                                                    <p:ajax update="pnlCliente" listener="#{notaFiscalProdutoControle.preencherDest()}" event="change"/>
                                                </p:selectOneMenu>
                                            </div>
                                        </div>
                                    </div>
                                </p:row>
                                <p:row rendered="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.ide.tpEmis eq '4'}">
                                    <h5>Fornecedor</h5>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Fornecedor"/>
                                                <p:selectOneMenu value="#{notaFiscalProdutoControle.nfSelecionado.idFornecedor}"
                                                                 panelStyle="width:180px" effect="fade"
                                                                 var="t" style="width:160px" filter="true" filterMatchMode="startsWith"
                                                                 converter="#{genericConverter}">
                                                    <p:column>
                                                        <h:outputText value="#{t.razaoSocial}"/>
                                                    </p:column>

                                                    <f:selectItem itemLabel="-- Selecione -- " noSelectionOption="true"/>
                                                    <f:selectItems value="#{fornecedorControle.fornecedores}" var="fornecedor" itemLabel="#{fornecedor.razaoSocial}" itemValue="#{fornecedor}"/>
                                                    <p:ajax update="pnlCliente" listener="#{notaFiscalProdutoControle.preencherDest()}" event="change"/>
                                                </p:selectOneMenu>
                                            </div>
                                        </div>
                                    </div>
                                </p:row>
                                <p:outputPanel id="pnlCliente">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Nome"/>
                                                <p:inputText value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.dest.XNome}"
                                                             disabled="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.ide.tpAmb eq '2'}"/>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="CPF/CNPJ"/>
                                                <p:inputText value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.dest.cpfCnpj}"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <ui:remove>
                                            <div class="col-md-6">
                                                <div class="form-group form-md-line-input">
                                                    <p:outputLabel for="@next" value="RG"/>
                                                    <p:inputText value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.dest.rgCliente}"/>
                                                </div>
                                            </div>
                                        </ui:remove>
                                        <div class="col-md-6">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Email"/>
                                                <p:inputText value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.dest.email}"
                                                             required="true" requiredMessage="Informe o email do cliente"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="CEP"/>
                                                <p:inputMask mask="99.999-999" value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.dest.enderDest.CEP}"
                                                             rendered="true"
                                                             requiredMessage="Informe o CEP"/>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Telefone"/>
                                                <p:inputMask mask="(99) 9999-9999?9" value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.dest.enderDest.fone}" styleClass="telefone"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Endereco"/>
                                                <p:inputText value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.dest.enderDest.XLgr}"
                                                             required="true"
                                                             requiredMessage="Informe o endereço"/>
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Nº"/>
                                                <p:inputText value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.dest.enderDest.nro}"
                                                             required="true" requiredMessage="Informe o número do endereço"/>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Complemento"/>
                                                <p:inputText value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.dest.enderDest.XCpl}"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Bairro"/>
                                                <p:inputText value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.dest.enderDest.XBairro}"
                                                             required="true" requiredMessage="Infome o bairro"/>
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="UF"/>
                                                <p:selectOneMenu id="uf" value="#{notaFiscalProdutoControle.nfSelecionado.idUFCliente}"
                                                                 required="true" requiredMessage="Informe a UF do cliente" converter="#{genericConverter}">
                                                    <f:selectItem itemLabel="--" noSelectionOption="true"/>
                                                    <f:selectItems value="#{notaFiscalProdutoControle.UFs}" var="uf" itemLabel="#{uf.descricao}" itemValue="#{uf}"/>
                                                    <p:ajax event="change" process="@this" update="uf, cidade"/>
                                                </p:selectOneMenu>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Cidade"/>
                                                <p:selectOneMenu id="cidade" value="#{notaFiscalProdutoControle.nfSelecionado.idCidadeCliente}"
                                                                 required="true" requiredMessage="Informe a cidade do cliente" converter="#{genericConverter}">
                                                    <f:selectItem itemLabel="-- Selecione -- " noSelectionOption="true"/>
                                                    <f:selectItems value="#{notaFiscalProdutoControle.cidades}" var="cidade" itemLabel="#{cidade.descricao}" itemValue="#{cidade}"/>
                                                    <p:ajax event="change" process="@this" listener="#{notaFiscalProdutoControle.preencherDescricaoCidade()}"/>
                                                </p:selectOneMenu>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Cliente contribuinte de ICMS?"/>
                                                <p:selectOneMenu value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.dest.indIEDest}"
                                                                 required="true" requiredMessage="Informe se o cliente é contribuinte de ICMS">
                                                    <f:selectItem itemLabel="-- Selecione -- " noSelectionOption="true"/>
                                                    <f:selectItem itemLabel="Contribuinte" itemValue="1"/>
                                                    <f:selectItem itemLabel="Contribuinte isento" itemValue="2"/>
                                                    <f:selectItem itemLabel="Não contribuinte" itemValue="9"/>
                                                </p:selectOneMenu>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Inscrição estadual"/>
                                                <p:inputText value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.dest.IE}"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Inscrição municipal"/>
                                                <p:inputText value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.dest.IM}"/>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Inscrição no SUFRAMA"/>
                                                <p:inputText value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.dest.ISUF}"/>
                                            </div>
                                        </div>
                                    </div>
                                </p:outputPanel>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="card card-w-title h-100">
                                <h5>Frete</h5>
                                <p:importEnum type="br.com.villefortconsulting.sgfinancas.util.nf.EnumTipoFrete"/>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group form-md-line-input">
                                            <p:outputLabel for="@next" value="Tem frete?"/>
                                            <p:selectOneMenu value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.transp.modFrete}"
                                                             required="true" requiredMessage="Informe se tem frete">
                                                <f:selectItems value="#{EnumTipoFrete.ALL_VALUES}" var="enum" itemLabel="#{enum.descricao}" itemValue="#{enum.tipo}"/>
                                                <p:ajax update="pnlVeiculo, pnlTransportadora" process="@this" listener="#{notaFiscalProdutoControle.alterarFrete()}" event="change"/>
                                            </p:selectOneMenu >
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <p:outputPanel id="pnlTransportadora">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Transportadora"/>
                                                <p:selectOneMenu value="#{notaFiscalProdutoControle.nfSelecionado.idTransportadora}"
                                                                 disabled="#{not notaFiscalProdutoControle.usaTransportadora}" converter="#{genericConverter}"
                                                                 required="#{notaFiscalProdutoControle.usaTransportadora}" requiredMessage="Informe a transportadora">
                                                    <f:selectItem itemLabel="-- Selecione -- " noSelectionOption="true"/>
                                                    <f:selectItems value="#{transportadoraControle.transportadoras}" var="transportadora" itemLabel="#{transportadora.descricao}" itemValue="#{transportadora}"/>
                                                </p:selectOneMenu>
                                            </div>
                                        </p:outputPanel>
                                    </div>
                                </div>

                                <p:outputPanel id="pnlVeiculo">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group form-md-line-input">
                                                <label class="control-label">
                                                    UF da placa do veículo</label>
                                                <p:selectOneMenu id="ufPlaca" value="#{notaFiscalProdutoControle.nfSelecionado.idUfPlacaVeiculo}"
                                                                 disabled="#{not notaFiscalProdutoControle.usaTransportadora}" converter="#{genericConverter}"
                                                                 required="#{notaFiscalProdutoControle.usaTransportadora}" requiredMessage="Informe a UF da placa">
                                                    <f:selectItem itemLabel="-- Selecione -- " noSelectionOption="true"/>
                                                    <f:selectItems value="#{notaFiscalProdutoControle.UFs}" var="uf" itemLabel="#{uf.descricao}" itemValue="#{uf}"/>
                                                </p:selectOneMenu>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Número da placa"/>
                                                <p:inputMask mask="aaa-9999" value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.transp.veicTransp.placa}"
                                                             disabled="#{not notaFiscalProdutoControle.usaTransportadora}"
                                                             required="#{notaFiscalProdutoControle.usaTransportadora}" requiredMessage="Informe a placa"/>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="RNTC do veículo"/>
                                                <p:inputText value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.transp.veicTransp.RNTC}"
                                                             disabled="#{not notaFiscalProdutoControle.usaTransportadora}"
                                                             required="#{notaFiscalProdutoControle.usaTransportadora}" requiredMessage="Informe a RNTC"/>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p:dataGrid value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.transp.vol}" var="vol" id="gridVol"
                                                        columns="1" emptyMessage="Nenhum grupo adicionado" styleClass="pb-3">

                                                <f:facet name="header">
                                                    Grupo de volumes
                                                    <div class="pull-right">
                                                        <p:commandButton action="#{notaFiscalProdutoControle.addGrupoVolume()}" value="Adicionar"
                                                                         disabled="#{not notaFiscalProdutoControle.usaTransportadora}" update="gridVol" process="@this"/>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </f:facet>

                                                <div class="card p-0">
                                                    <div class="card-header text-right" style="padding: 0.75rem;">
                                                        <p:commandLink action="#{notaFiscalProdutoControle.removeGrupoVolume(vol)}" title="Remover"
                                                                       styleClass="btn btn-outline-danger" style="padding: 0 4px;" update="gridVol"
                                                                       process="@this, gridVol" immediate="true">
                                                            <i class="fa fa-times"></i>
                                                        </p:commandLink>
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="row">
                                                            <div class="col">
                                                                <div class="form-group form-md-line-input">
                                                                    <p:outputLabel for="@next" value="Quantidade"/>
                                                                    <p:inputText value="#{vol.QVol}" disabled="#{not notaFiscalProdutoControle.usaTransportadora}"
                                                                                 required="#{notaFiscalProdutoControle.usaTransportadora}" requiredMessage="Informe a qte de volume transportado"/>
                                                                </div>
                                                            </div>
                                                            <div class="col">
                                                                <div class="form-group form-md-line-input">
                                                                    <p:outputLabel for="@next" value="Espécie"/>
                                                                    <p:inputText value="#{vol.esp}"
                                                                                 disabled="#{not notaFiscalProdutoControle.usaTransportadora}"
                                                                                 required="#{notaFiscalProdutoControle.usaTransportadora}" requiredMessage="Informe o nº de identificação dos volumes"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col">
                                                                <div class="form-group form-md-line-input">
                                                                    <p:outputLabel for="@next" value="Marca"/>
                                                                    <p:inputText value="#{vol.marca}"
                                                                                 disabled="#{not notaFiscalProdutoControle.usaTransportadora}"
                                                                                 required="#{notaFiscalProdutoControle.usaTransportadora}" requiredMessage="Informe o nº de identificação dos volumes"/>
                                                                </div>
                                                            </div>
                                                            <div class="col">
                                                                <div class="form-group form-md-line-input">
                                                                    <p:outputLabel for="@next" value="Numeração"/>
                                                                    <p:inputText value="#{vol.NVol}"
                                                                                 disabled="#{not notaFiscalProdutoControle.usaTransportadora}"
                                                                                 required="#{notaFiscalProdutoControle.usaTransportadora}" requiredMessage="Informe o nº de identificação dos volumes"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col">
                                                                <div class="form-group form-md-line-input">
                                                                    <p:outputLabel for="@next" value="Peso líquido"/>
                                                                    <p:inputNumber value="#{vol.pesoL}" symbol=" Kg" symbolPosition="s" thousandSeparator="."
                                                                                   decimalSeparator="," decimalPlaces="2"
                                                                                   disabled="#{not notaFiscalProdutoControle.usaTransportadora}"
                                                                                   required="#{notaFiscalProdutoControle.usaTransportadora}" requiredMessage="Informe o peso liquido/"/>
                                                                </div>
                                                            </div>
                                                            <div class="col">
                                                                <div class="form-group form-md-line-input">
                                                                    <p:outputLabel for="@next" value="Peso bruto"/>
                                                                    <p:inputNumber value="#{vol.pesoB}" symbol=" Kg" symbolPosition="s" thousandSeparator="."
                                                                                   decimalSeparator="," decimalPlaces="2"
                                                                                   disabled="#{not notaFiscalProdutoControle.usaTransportadora}"
                                                                                   required="#{notaFiscalProdutoControle.usaTransportadora}" requiredMessage="Informe o peso bruto"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col">
                                                                <div class="form-group form-md-line-input">
                                                                    <p:outputLabel for="@next" value="Lacres"/>
                                                                    <p:chips value="#{vol.lacres}"/>
                                                                    <small>Tecle enter para adicionar</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </p:dataGrid>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="O frete será somado a NF?"/>
                                                <p:selectOneMenu value="#{notaFiscalProdutoControle.nfSelecionado.freteSomaNotaFiscal}"
                                                                 disabled="#{not notaFiscalProdutoControle.usaTransportadora}"
                                                                 required="#{notaFiscalProdutoControle.usaTransportadora}" requiredMessage="Informe se o frete sera somado à NF">
                                                    <f:selectItem itemLabel="-- Selecione -- " noSelectionOption="true"/>
                                                    <f:selectItem itemLabel="Sim" itemValue="S"/>
                                                    <f:selectItem itemLabel="Não" itemValue="N"/>
                                                </p:selectOneMenu >
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Valor do frete"/>
                                                <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.valorFrete}"
                                                               symbol="R$ " thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                               disabled="#{not notaFiscalProdutoControle.usaTransportadora}"
                                                               required="#{notaFiscalProdutoControle.usaTransportadora}" requiredMessage="Informe o valor do frete"/>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Valor do seguro"/>
                                                <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.valorSeguro}"
                                                               symbol="R$ " thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                               disabled="#{not notaFiscalProdutoControle.usaTransportadora}"
                                                               required="#{notaFiscalProdutoControle.usaTransportadora}" requiredMessage="Informe o valor do seguro"/>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group form-md-line-input">
                                                <p:outputLabel for="@next" value="Valor despesas adicionais"/>
                                                <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.valorDespesasAdicionais}"
                                                               symbol="R$ " thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                               disabled="#{not notaFiscalProdutoControle.usaTransportadora}"
                                                               required="#{notaFiscalProdutoControle.usaTransportadora}" requiredMessage="Informe o valor das despesas adicionais"/>
                                            </div>
                                        </div>
                                    </div>
                                </p:outputPanel>
                            </div>
                        </div>
                    </div>
                    <p:row rendered="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.ide.tpEmis ne '4'}">
                        <div class="row mb-3">
                            <div class="col">
                                <div class="card card-w-title">
                                    <h5>Pagamento</h5>

                                    <div class="row">
                                        <div class="col">
                                            <p:importEnum type="br.com.villefortconsulting.sgfinancas.util.EnumMeioDePagamento"/>
                                            <p:dataGrid value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.pag.detPag}" var="pag" id="gridPag"
                                                        columns="#{notaFiscalProdutoControle.qteColunasPag}" styleClass="pb-3"
                                                        emptyMessage="Nenhum meio de pagamento adicionado. Não será possível emitir a nota.">

                                                <f:facet name="header">
                                                    Meio de pagamento
                                                    <div class="pull-right">
                                                        <p:commandButton action="#{notaFiscalProdutoControle.addMeioPagamento()}" value="Adicionar" update="gridPag" process="@this"/>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </f:facet>

                                                <div class="card p-0">
                                                    <div class="card-header text-right" style="padding: 0.75rem;">
                                                        <p:commandLink action="#{notaFiscalProdutoControle.removeMeioPagamento(pag)}" title="Remover"
                                                                       styleClass="btn btn-outline-danger" style="padding: 0 4px;" update="gridPag" process="@this, gridPag">
                                                            <i class="fa fa-times"></i>
                                                        </p:commandLink>
                                                    </div>
                                                    <div class="card-body">

                                                        <div class="row">
                                                            <div class="col">
                                                                <p:outputLabel for="@next" value="Tipo de pagamento"/>
                                                                <p:selectOneMenu value="#{pag.indPag}" panelStyle="width:180px" effect="fade">
                                                                    <f:selectItem itemLabel="Pagamento à vista" itemValue="0"/>
                                                                    <f:selectItem itemLabel="Pagamento a prazo" itemValue="1"/>
                                                                    <f:selectItem itemLabel="Outros" itemValue="2"/>
                                                                </p:selectOneMenu>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col">
                                                                <p:outputLabel for="@next" value="Meio de pagamento"/>
                                                                <p:selectOneMenu value="#{pag.TPag}" panelStyle="width:180px" effect="fade" var="t"
                                                                                 required="true" requiredMessage="Informe o meio de pagamento">
                                                                    <p:column>
                                                                        <h:outputText value="#{notaFiscalProdutoControle.getEnumMeioDePagamentoDesc(t)}"/>
                                                                    </p:column>

                                                                    <f:selectItem itemLabel="-- Selecione -- " noSelectionOption="true"/>
                                                                    <f:selectItems value="#{EnumMeioDePagamento.ALL_VALUES}" var="meio" itemLabel="#{meio.descricao}" itemValue="#{meio.codigo}"/>
                                                                    <p:ajax update="pnlDadosCartao" process="@this"/>
                                                                </p:selectOneMenu>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col">
                                                                <p:outputLabel for="@next" value="Valor"/>
                                                                <p:inputNumber value="#{pag.VPag}" placeholder="Deixe em branco para dividir igualmente."/>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col">
                                                                <p:outputPanel id="pnlDadosCartao">
                                                                    <p:row rendered="#{pag.TPag eq EnumMeioDePagamento.CARTAO_DE_CREDITO.codigo or pag.TPag eq EnumMeioDePagamento.CARTAO_DE_DEBITO.codigo}">
                                                                        <p>Pagamento por cartão não suportado no momento</p>
                                                                    </p:row>
                                                                </p:outputPanel>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </p:dataGrid>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </p:row>
                    <p:outputPanel id="totaisDaNota">
                        <p:autoUpdate disabled="#{!notaFiscalProdutoControle.autoUpdate()}"/>
                        <p:inputText type="hidden" value="#{notaFiscalProdutoControle.resetTotal}"/>
                        <div class="row mb-3">
                            <div class="col">
                                <div class="card card-w-title">
                                    <h5>
                                        Totais da nota
                                        <p:commandButton value="Recalcular" onclick="confirm('Todas as alterações no totais da nota serão perdidas.\nContinuar?')"
                                                         action="#{notaFiscalProdutoControle.recalculaTotais()}" update="totaisDaNota" process="tblProdutos, @this"
                                                         rendered="#{!notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                    </h5>
                                    <p:tabView id="totais">
                                        <p:tab title="RetTrib" rendered="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.retTrib ne null}">
                                            <div class="row align-items-end">
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="PIS retido"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.retTrib.VRetPIS}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="COFINS do retido"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.retTrib.VRetCOFINS}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="CSLL retido"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.retTrib.VRetCSLL}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="BC do IRRF retido"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.retTrib.VBCIRRF}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="IRRF retido"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.retTrib.VIRRF}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="BC da retenção da Previdência retido"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VBCRetPrev}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="Retenção da Previdência retido"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.retTrib.VRetPrev}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </p:tab>
                                        <p:tab title="ISSQNtot" rendered="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ISSQNtot ne null}">
                                            <div class="row align-items-end">
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="Serviços Pretados"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ISSQNtot.VServ}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="BC do ISS"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ISSQNtot.VBC}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="ISS"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ISSQNtot.VISS}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="PIS"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ISSQNtot.VPIS}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="COFINS"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ISSQNtot.VCOFINS}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="Data da prestação do serviço"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ISSQNtot.dCompet}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row align-items-end">
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="Dedução para redução da BC"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ISSQNtot.VDeducao}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="Outras retenções"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ISSQNtot.VOutro}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="Desconto incondicionado"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ISSQNtot.VDescIncond}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="Desconto condicionado"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ISSQNtot.VDescCond}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="Retenção ISS"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ISSQNtot.VISSRet}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="Código do Regime Especial de Tributação"/>
                                                        <p:selectOneMenu value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ISSQNtot.cRegTrib}"
                                                                         disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}">
                                                            <f:selectItem itemLabel="Selecione" noSelectionOption="true"/>
                                                            <f:selectItem itemValue="1" itemLabel="Microempresa Municipal"/>
                                                            <f:selectItem itemValue="2" itemLabel="Estimativa"/>
                                                            <f:selectItem itemValue="3" itemLabel="Sociedade de Profissionais"/>
                                                            <f:selectItem itemValue="4" itemLabel="Cooperativa"/>
                                                            <f:selectItem itemValue="5" itemLabel="Microempresário Individual"/>
                                                            <f:selectItem itemValue="6" itemLabel="Microempresário e Empresa de Pequeno Porte"/>
                                                        </p:selectOneMenu>
                                                    </div>
                                                </div>
                                            </div>
                                        </p:tab>
                                        <p:tab title="ICMS" rendered="${notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot ne null}">
                                            <div class="row align-items-end">
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="BC do ICMS"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VBC}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="ICMS"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VICMS}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="ICMS desonerado"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VICMSDeson}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="ICMS relativo ao FCP da UF de destino"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VFCPUFDest}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="ICMS interestadual para a UF de destino"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VICMSUFDest}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="ICMS interestadual para a UF do remetente"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VICMSUFRemet}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row align-items-end">
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="FCP"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VFCP}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="BC ST"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VBCST}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="ICMS ST"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VST}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="FCP por substituição"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VFCPST}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="FCP retido anteriormente por substituição"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VFCPSTRet}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="Produtos"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VProd}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row align-items-end">
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="Frete"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VFrete}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="Seguro"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VSeg}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="Desconto"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VDesc}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="II"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VII}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="IPI"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VIPI}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="IPI de devolução"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VIPIDevol}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row align-items-end">
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="PIS"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VPIS}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="COFINS"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VCOFINS}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="Outras retenções"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VOutro}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="Valor total da NF"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VNF}"
                                                                       symbol="R$ " symbolPosition="p" required="true"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                                <div class="col-2">
                                                    <div class="form-group form-md-line-input">
                                                        <p:outputLabel for="@next" value="Somatório aproximado dos tributos"/>
                                                        <p:inputNumber value="#{notaFiscalProdutoControle.nfSelecionado.objTNFe.infNFe.total.ICMSTot.VTotTrib}"
                                                                       symbol="R$ " symbolPosition="p"
                                                                       thousandSeparator="." decimalSeparator="," decimalPlaces="2"
                                                                       disabled="#{true or notaFiscalProdutoControle.nfSelecionado.enumModelo.calculaImpostos}"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </p:tab>
                                    </p:tabView>
                                </div>
                            </div>
                        </div>
                    </p:outputPanel>
                </div>
            </p:row>
            <style>
                .valor {
                    width: 90px;
                }
                div.inlineSelector.ui-selectonemenu {
                    border: none;
                    display: inline-block !important;
                    width: auto !important;
                    height: 16px !important;
                }
                div.inlineSelector, div.inlineSelector * {
                    background-color: transparent !important;
                }
                div.inlineSelector > label {
                    padding: 0 6px !important;
                    overflow: visible;
                }
                div.inlineSelector > .ui-selectonemenu-trigger > span {
                    top: 3px !important;
                }
            </style>
            <p:dialog widgetVar="issqnHelp" width="600" header="Ajuda">
                <p>Este grupo de informação deve ser informado apenas na situação em que uma prestação de serviço seja fato gerador do ISSQN e do ICMS, isto é seja uma prestação de serviço com fornecimento de peças.</p>
                <p>Importante ressaltar que a NF-e conjugada que tem item de serviço e de mercadorias só pode ser emitida com a prévia anuência da SEFAZ e da Prefeitura interessadas.</p>
                <p>O simples fato da NF-e ter sido autorizada não significa que ela foi emitida corretamente, pois a SEFAZ não verifica se a NF-e conjugado pode ser emitida.</p>
            </p:dialog>
        </ui:define>

    </ui:composition>

</html>
